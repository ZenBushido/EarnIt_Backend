databaseChangeLog:
 - changeSet:
    id: create_mobile_application_table
    author: mukesh_kumar
    changes:
      - createTable:
          tableName: mobile_application
          columns:
            - column:
                name: id
                type: bigint
            - column:
                name: name
                type: varchar(1000)
            - column:
                name: created_date
                type: TIMESTAMP WITH TIME ZONE
            - column:
                name: ignored_by_parent
                type: boolean
            - column:
                name: children_id
                type: bigint
      - addPrimaryKey:
          columnNames: id
          constraintName: mobile_application_pk
          schemaName: public
          tableName: mobile_application
      - addForeignKeyConstraint:
          baseColumnNames: id
          baseTableName: mobile_application
          constraintName: fk_mobile_application_children
          deferrable: true
          referencedColumnNames: id
          referencedTableName: childrens
      - addUniqueConstraint:
          columnNames: id, children_id
          constraintName: mobile_application_uk_name_children_id
          schemaName: public
          tableName: mobile_application

    id: create_mobile_application_user_table
    author: mukesh_kumar
    changes:
      - createTable:
          tableName: mobile_application_usage
          columns:
            - column:
                name: id
                type: bigint
            - column:
                name: start
                type: TIMESTAMP WITH TIME ZONE
            - column:
                name: end
                type: TIMESTAMP WITH TIME ZONE
            - column:
                name: mobile_application_id
                type: bigint
      - addPrimaryKey:
          columnNames: id
          constraintName: mobile_application_usage_pk
          schemaName: public
          tableName: mobile_application_usage
      - addForeignKeyConstraint:
          baseColumnNames: id
          baseTableName: mobile_application_usage
          constraintName: fk_mobile_application_usage_children
          deferrable: true
          referencedColumnNames: id
          referencedTableName: mobile_application
      - addUniqueConstraint:
          columnNames: start, end, mobile_application_id
          constraintName: mobile_application_usage_uk_start_end_mobile_application_id
          schemaName: public
          tableName: mobile_application_usage